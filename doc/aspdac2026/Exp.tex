\section{Experimental Results}
\label{Exp}
\subsection{Experiment Setup}
\label{Exp:Set}
We compare the ability of T-par to optimize circuits produced using our methodology ({\it Proposed}) against those
of Qiskit's \texttt{PhaseOracle} method. This method takes in an ESOP expression and applies the synthesis in
Sec.~\ref{Mot:Lib}. Since \texttt{PhaseOracle} only generates Control-Z gates,
we further decompose these using the methods described in Sec.~\ref{Pro}.  For cubes of $n \geq 4$,
the decomposition from Sec.~\ref{Pro:n4} is used. \texttt{PhaseOracle} synthesizes expressions in the same
manner as Ex.~\ref{ex-series} and so cannot take advantage of the sum of paths simplification that
the proposed method uses.

We randomly generate ESOP expressions to feed into both of our methods. The main code is run in python,
while running T-par as a system call to a C++ binary and EXORCISM-4 through a Python-C++ API.

Here we propose two kinds of ESOP Expressions to test:

\begin{itemize}
\item (N3) : Randomly generated ESOP expressions are constrained to those of $n \leq 3$. This tests the
  ability of the precomputed 3bit library to enable simplification of pure CNOT+T circuits through easier
  sum of paths calculations.
\item (N4) : Randomly generated ESOP cubes are constrained as follows :
  those with up to 2 literals (i.e. no T gates)  are generated with 2/5 probability,
  3 literals (has T-gates but CNOT+T) with 2/5 probability, and 4 or more literals with 1/5 probability.
  This tests the ability of the proposed method to find a simplified solution in its EXORCISM-4 step.
  It creates an expression which can already be mostly expressed as a CNOT+T network due to its cubes of
  3 or fewer literals in order to create a more fair comparison between Qiskit's method and the Proposed
  method.
\end{itemize}

We test these for $n=4-12$ literals. The ESOP expressions are randomly generated according to two groups
based on the number of cubes $k$ in them. These are further divided into two groups:

\begin{itemize}
\item ($k=2^{n-1}$) This randomizes the number of cubes between $2n$ and $2^{n-1}$.This increases the chances
  that inserted subcircuits will have common literals that allow them to be simplified and have reduced T-count,
  while making it harder for T-par to partition any cubes $n \geq 4$ for T-depth scheduling.
\item ($k=n$) This randomizes the number of cubes between $1$ and $2n-1$. This makes the arrangements sparser,
  allowing for better parallelization by T-par, but making it harder to have common literals that can combine
  to reduce the number of cubes.
\end{itemize}

For each combination of N3/N4 and $k=2^{n-1}$/$k=n$, we generated 100 random ESOP expressions and fed them
to both Qiskit and the Proposed method. We take the T-count of the circuit generated by Qiskit $tcnt_q$ and
the T-count of the circuit generated by Proposed $tcnt_p$ and take the percentage difference
$\Delta$T-count\% $= (tcnt_q - tcnt_p) / tcnt_q$ and take the arithmetic average of $\Delta$T-count\% for
Avg $\Delta$ T-count\%. We do the same for T-depth and get Avg $\Delta$T-depth\%. The results are
shown in Table~\ref{table-results}.
%\subsection{Results}
%\label{Exp:Res}

\begin{table}[t]
  \begin{center}
    \scalebox{1.2} {
      \begin{tabular}{c|c|c|c}\hline
                            &                   & $k=2^{n-1}$ & $k=n$    \\\hline
        \multirow{2}{*}{N3} & Avg $\Delta$T-count\% &  0.222      & 0.115    \\\cline{2-4}
                            & Avg $\Delta$T-depth\% &  0.228      & 0.199    \\\hline
        \multirow{2}{*}{N4} & Avg $\Delta$T-count\% &  0.655      & 0.440    \\\cline{2-4}
                            & Avg $\Delta$T-depth\% &  0.635      & 0.425    \\\hline

      \end{tabular}        
    }
  \end{center}
  \caption{Experimental Results}
  \label{table-results}
  \vspace{-0.5cm}
\end{table}

\subsection{Analysis}
The most significant result is \{$k=2^{n-1}$,N4\}, which reports reductions of over 60\% over
Qiskit's method. This is because EXORCISM-4 can find more cubes to simplify when they are denser
and share more literals.

Next is \{$k=n$,N4\}. Despite the sparsity, EXORCISM-4 was still able to find cubes to simplify
and that contributes to the reduction. This is notable because the EXORCISM-4 produced ESOP
expressions had a lower average number of literals in each cube.

\{$k=2^{n-1}$,N3\} showed a more moderate but significant advantage. This is because EXORCISM-4
can find fewer advantages over the standard case since it is already in a form that allows
the T-par algorithm to work optimally. However, there is still a significant advantage because
the 3-bit library of functions allows a more efficient sum of paths calculation to combine
T-gates into Clifford phase gates.

Finally \{$k=n$,N3\} shows the least amount of advantage because of its sparsity. This is most
notable in T-depth, because T-par can already efficiently schedule the circuit produced by Qiskit.
This means that neither 

Despite the clear advantages conferred by the Proposed method, there remain a few corner
cases where the Qiskit circuit outperformed the one generated by the Proposed method, such as
in the case for the expression $(x_3x_7) \oplus (~x_6x_4) \oplus (x_3~x_7~x_6) \oplus (~x_6x_5~x_3) \oplus (x_2x_4) \oplus (~x_8~x_3) \oplus (~x_7x_3) \oplus (x_1~x_8) \oplus (~x_1~x_8) \oplus (x_2x_4x_3) \oplus (x_3x_5) \oplus (~x_7x_6)$.
Evaluating this will require much more material than can be reasonably fit into this paper,
and we will leave it as a topic for future research.

\label{Exp:An}

