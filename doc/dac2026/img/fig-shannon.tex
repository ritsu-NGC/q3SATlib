\Qcircuit @C=0.5em @R=0.2em @!R { \\
          \push{{x}_{0} }     & & \multigate{3}{F} & \qw   & \qw & &         & & \qw                & \qw                     & \qw              & \qw                     & \multigate{5}{F_{x_k=1}} & \qw               & \qw           & \qw                         & \qw               & \qw               & \qw                      & \qw         & \qw                        & \multigate{5}{F_{x_k=1}}       & \qw                 & \qw                          & \qw                       & \qw & \qw\\
          \push{{x}_{1} }     & & \ghost{F}        & \qw   & \qw & &         & & \qw                & \qw                     & \qw               & \qw                     & \ghost{F_{x_k=1}}       & \qw               & \qw           & \qw                         & \qw               & \qw               & \qw                      & \qw             & \qw                    & \ghost{F_{x_k=1}}               & \qw                & \qw                          & \qw                       & \qw & \qw\\
          \push{\vdots}      & &                  &       & \qw & &           & &                     & \push{\vdots}           &                  &  \push{\vdots}          &                          & \push{\vdots}     &               &                             & \push{\vdots}     &                   &                          &                &  \push{\vdots}          &                  & \push{\vdots}     &               &                             & \push{\vdots}\\
          \push{{x}_{k} }     & & \ghost{F}        & \qw   & \qw & &         & & \qw                & \qw                     & \ctrl{3}         & \qw                     & \ghost{F_{x_k=1}}        & \qw               & \ctrl{3}      & \qw                         & \qw               & \qw               & \gate{X}                  & \ctrl{3}       & \qw                & \ghost{F_{x_k=1}}\qw               & \qw                  & \ctrl{3}                    & \gate{X}                       & \qw & \qw\\
          \push{\vdots}      & &                  &       & \qw & &\push{=} & &                     & \push{\vdots}           &                  &  \push{\vdots}         &                           & \push{\vdots}     &               &                             & \push{\vdots}     &                   &                           &                &  \push{\vdots}          &                  & \push{\vdots}     &               &                             & \push{\vdots}\\
          \push{{x}_{n} }     & & \ghost{F}        & \qw  & \qw  & &         & & \qw                & \qw                     & \qw              & \qw                     & \ghost{F_{x_k=1}}        & \qw               & \qw           & \qw                         & \qw               & \qw               & \qw                       & \qw            & \qw                      & \ghost{F_{x_k=1}}\qw              & \qw              & \qw        & \qw                       & \qw & \qw\\
          \push{{\ket{0}}   }& & \targ\qwx[-1]     & \qw  & \qw  & &         & & \gate{\mathrm{H}} & \gate{\mathrm{T^\dagger}} & \targ\qwx[-3]    & \gate{\mathrm{T^\dagger}} & \targ\qwx[-1]         & \gate{\mathrm{T}} & \targ\qwx[-3] & \gate{\mathrm{T^{\dagger}}} & \gate{\mathrm{H}} & \gate{\mathrm{H}} & \gate{\mathrm{T^\dagger}} & \targ\qwx[-1] & \gate{\mathrm{T^\dagger}} & \targ\qwx[-1]    & \gate{\mathrm{T}} & \targ\qwx[-1] & \gate{\mathrm{T^{\dagger}}} & \gate{\mathrm{H}} & \qw\\
}

